!function(){"use strict";!function(){const t={states:{},bindings:{},getState:function(t,e){return this.states[t]&&this.states[t][e]},setState:function(t,e,s){this.states[t]||(this.states[t]={}),this.states[t][e]=s},updateState:function(t,e){this.states[t]||(this.states[t]={}),Object.assign(this.states[t],e)},getBindings:function(t){return this.bindings[t]||{}},setBindings:function(t,e){this.bindings[t]=e},processStateAttribute:function(t){const e=t.getAttribute("state");if(e)try{this.updateState(t.id,JSON.parse(e)),t.removeAttribute("state")}catch(t){console.error("Error parsing state attribute:",t)}},processBindStateAttribute:function(t){const e=t.getAttribute("bind-state");if(e)try{this.setBindings(t.id,JSON.parse(e)),t.removeAttribute("bind-state")}catch(t){console.error("Error parsing bind-state attribute:",t)}},updateStateFromResponse:function(t,e){this.updateState(t,e);const s=this.getBindings(t);Object.entries(s).forEach((([t,s])=>{const r=s.keys||Object.keys(e),n={};r.forEach((t=>{t in e&&(n[t]=e[t])})),this.updateState(t,n)}))}};function e(t){const e=t.getAttribute("hx-trigger-info");if(e)try{const s=JSON.parse(e);Object.entries(s).forEach((([e,s])=>{t.addEventListener(e,function(t,e){return function(s){s.preventDefault();const r={elt:t,event:s,path:e.path||t.getAttribute("hx-get"),target:e.target||t.getAttribute("hx-target"),swap:e.swap||t.getAttribute("hx-swap"),params:e.params||{},headers:e.headers||{},values:e.values||{},method:e.method||"GET"};htmx.trigger(t,"htmx:configRequest",r).defaultPrevented||htmx.trigger(t,"htmx:beforeRequest",r).defaultPrevented||htmx.trigger(t,"htmx:beforeSend",r).defaultPrevented||htmx.ajax(r.method,r.path,r)}}(t,s))})),t.removeAttribute("hx-trigger-info")}catch(t){console.error("Error parsing hx-trigger-info attribute:",t)}}function s(r){Array.from(r).forEach((r=>{r.nodeType===Node.ELEMENT_NODE&&(r.id&&(t.processStateAttribute(r),t.processBindStateAttribute(r),e(r)),s(r.children))}))}function r(){document.body.addEventListener("htmx:configRequest",(e=>{const{elt:s,headers:r}=e.detail;if(s.id){const e={...t.states[s.id]},n=t.getBindings(s.id);Object.entries(n).forEach((([s,r])=>{const n=t.states[s];if(n){(r.keys||Object.keys(n)).forEach((t=>{t in n&&(e[`${t}`]=n[t])}))}})),Object.keys(e).length>0&&(r["X-Component-State"]=JSON.stringify(e),r["HX-Trigger"]=s.id)}})),document.body.addEventListener("htmx:beforeOnLoad",(e=>{const{xhr:s,elt:r}=e.detail,n=s.getResponseHeader("X-Component-State"),i=s.getResponseHeader("HX-Trigger-Id");if(n)try{const e=JSON.parse(n);Object.keys(e).length>0&&(i?(t.updateStateFromResponse(i,e),console.log(`Updated state for ${i}:`,t.states[i])):console.warn("No id found for element, state update skipped"))}catch(t){console.error("Error parsing X-Component-State header:",t)}})),window.fluidFrameObserver||(window.fluidFrameObserver=new MutationObserver((r=>{r.forEach((r=>{if("childList"===r.type)s(r.addedNodes);else if("attributes"===r.type){const{target:s,attributeName:n}=r;s.id&&("state"===n?t.processStateAttribute(s):"bind-state"===n?t.processBindStateAttribute(s):"hx-trigger-info"===n&&e(s))}}))})),window.fluidFrameObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["state","bind-state","hx-trigger-info"]}))}function n(){s([document.body]),r()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),window.FluidFrameState=t,console.log("Initial states:",t.states),console.log("Initial bindings:",t.bindings)}();let t=JSON.parse(localStorage.getItem("loadedResources"))||{scripts:[],styles:[]},e=JSON.parse(localStorage.getItem("resourceContent"))||{scripts:{},styles:{}};const s=new IntersectionObserver((r=>{r.forEach((r=>{if(r.isIntersecting){const n=r.target;!function(s){new Promise((r=>{const n=s.scripts||[],i=s.styles||[],o=(s,r)=>new Promise((n=>{let i=document.querySelector(`${"script"===r?"script[src":"link[href"}="${s}"]`);return i?(console.log(`${r} already loaded in the DOM:`,s),void n()):t[r+"s"].includes(s)?(console.log(`${r} already loaded:`,s),i||(i=document.createElement("script"===r?"script":"link"),"script"===r?(i.src=s,i.textContent=e.scripts[s]):(i.rel="stylesheet",i.href=s,i.textContent=e.styles[s]),document.head.appendChild(i)),void n()):(i=document.createElement("script"===r?"script":"link"),"script"===r?i.src=s:(i.rel="stylesheet",i.href=s),i.onload=()=>{t[r+"s"].push(s),"script"===r?e.scripts[s]=i.textContent:e.styles[s]=i.sheet.cssRules[0].cssText,localStorage.setItem("loadedResources",JSON.stringify(t)),localStorage.setItem("resourceContent",JSON.stringify(e)),console.log(`Loaded ${r}:`,s),n()},void document.head.appendChild(i))})),a=async(t,e)=>{for(const s of t)await o(s,e)};Promise.all([a(i,"style"),a(n,"script")]).then((()=>r()))}))}(JSON.parse(n.getAttribute("data-dependencies"))),s.unobserve(n)}}))}),{root:null,rootMargin:"100px",threshold:.1});document.querySelectorAll("[data-dependencies]").forEach((t=>{s.observe(t)}))}();
